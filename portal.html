<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="shared.css">
  <style>
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.5);
      display: none; align-items: center; justify-content: center;
      backdrop-filter: blur(10px); z-index: 100;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .modal-overlay.show {
      opacity: 1;
    }
    .modal-content {
      background: white; width: clamp(320px, 85vmin, 918px); border-radius: var(--radius);
      padding: clamp(24px, 3.5vmin, 68px); position: relative; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
      transform: scale(0.8) translateY(30px);
      opacity: 0;
      transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    }
    .modal-overlay.show .modal-content {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    .modal-overlay.closing {
      opacity: 0;
    }
    .modal-overlay.closing .modal-content {
      transform: scale(0.9) translateY(20px);
      opacity: 0;
    }
    .qr-img { width: clamp(160px, 17vmin, 324px); display: block; margin: clamp(14px, 1.4vmin, 27px) auto 5px auto; border: 1px solid #eee; border-radius: 16px; }
    .store-badge { width: clamp(140px, 14vmin, 270px); border-radius: 14px; }
    
    /* Green overlay for screensaver transition */
    .green-overlay {
      position: fixed;
      inset: 0;
      background: linear-gradient(-45deg, #1a5d48, #2d8a6c, #164e3c, #1a5d48);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      z-index: 200;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .green-overlay.active {
      opacity: 1;
    }
    /* Dissolve effect for exit to screensaver */
    .green-overlay::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.1) 100%);
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    .green-overlay.active::after {
      opacity: 1;
    }
    /* Entry state: starts visible, will fade out with elegant reveal */
    .green-overlay.entry {
      opacity: 1;
      transition: none;
    }
    .green-overlay.entry.reveal {
      opacity: 0;
      transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    /* White overlay for page-to-page transitions */
    .white-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg);
      z-index: 199;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .white-overlay.active {
      opacity: 1;
    }
    .white-overlay.entry {
      opacity: 1;
      transition: none;
    }
    .white-overlay.entry.reveal {
      opacity: 0;
      transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    /* Content animation */
    .content-wrapper {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    .content-wrapper.hidden {
      opacity: 0;
      transform: translateY(10px) scale(0.99);
      transition: opacity 0.25s ease-out, transform 0.25s ease-out;
    }
    
    /* Exit to screensaver - content dissolve */
    .content-wrapper.exiting .back-nav,
    .content-wrapper.exiting img,
    .content-wrapper.exiting .topic-card {
      transition: opacity 0.3s ease, transform 0.35s ease, filter 0.3s ease;
      opacity: 0;
      transform: scale(0.95) translateY(-10px);
      filter: blur(3px);
    }
    .content-wrapper.exiting .topic-card { transition-delay: 0s; }
    .content-wrapper.exiting img { transition-delay: 0.05s; }
    .content-wrapper.exiting .back-nav { transition-delay: 0.1s; }
  </style>
</head>
<body>
  <div class="green-overlay" id="greenOverlay"></div>
  <div class="white-overlay" id="whiteOverlay"></div>
  <div class="container content-wrapper" id="content" style="padding: 30px 50px 20px 50px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 70px;">
      <a href="language.html" class="back-nav" onclick="navigateTo(event, this.href)">â† ZurÃ¼ck / Back</a>
      <img src="./assets/IZS_Logo_Black.png" alt="Logo" style="height: 80px;">
    </div>

    <div id="grid" class="topics-grid"></div>
  </div>

  <div id="modal" class="modal-overlay" onclick="closeModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <h2 id="mTitle" style="color: var(--primary); font-size: 38px; margin-top:0; border-bottom: 2px solid var(--primary-light); padding-bottom: 15px;"></h2>
      <div id="mBody" style="font-size: 26px; line-height: 1.6; margin-top: 25px;"></div>
      <button onclick="closeModal()" 
              style="margin-top: 40px; width: 100%; padding: 20px; border-radius: 15px; border: none; background: var(--primary); color: white; font-size: 22px; font-weight: 700;">
        SchlieÃŸen / Close
      </button>
    </div>
  </div>

  <script>
    // Smooth page navigation (back to language - use white overlay)
    function navigateTo(event, url) {
      event.preventDefault();
      const whiteOverlay = document.getElementById('whiteOverlay');
      sessionStorage.setItem('fromPage', 'true');
      
      whiteOverlay.classList.remove('entry', 'reveal');
      whiteOverlay.classList.add('active');
      
      setTimeout(() => {
        window.location.href = url;
      }, 280);
    }

    // Check if coming from language page (use white reveal)
    const overlay = document.getElementById('greenOverlay');
    const whiteOverlay = document.getElementById('whiteOverlay');
    const content = document.getElementById('content');
    
    if (sessionStorage.getItem('fromPage')) {
      whiteOverlay.classList.add('entry');
      sessionStorage.removeItem('fromPage');
      
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          whiteOverlay.classList.add('reveal');
        });
      });
    }

    // Modal functions
    function openModal() {
      const modal = document.getElementById('modal');
      modal.style.display = 'flex';
      // Trigger reflow for animation
      modal.offsetHeight;
      modal.classList.add('show');
      modal.classList.remove('closing');
    }
    
    function closeModal() {
      const modal = document.getElementById('modal');
      modal.classList.add('closing');
      modal.classList.remove('show');
      setTimeout(() => {
        modal.style.display = 'none';
        modal.classList.remove('closing');
      }, 300);
    }

    const topics = [
      { 
        id: 1, 
        icon: "ğŸ’", 
        deTitle: "Islamische EheschlieÃŸung (Nikah)", 
        arTitle: "Ø§Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ (Ø§Ù„Ù†ÙƒØ§Ø­)", 
        deInfo: "Sie brauchen folgende Unterlagen:<br>" +
          "1ï¸âƒ£ Erweiterte Meldebescheinigung (vom Rathaus)<br>" +
          "2ï¸âƒ£ Kopie der Ausweise beider Partner<br><br>" +
          "Termin per E-Mail vereinbaren:<br>" +
          "<strong style='color: var(--primary);'>info@iz-stuttgart.de</strong><br>" +
          "<span style='font-size:20px; opacity:0.8;'>(Bitte Kopie aller Dokumente beifÃ¼gen)</span><br><br>" +
          "Oder QR-Code scannen:<br>" +
          "<div style='display:flex; flex-direction:column; align-items:center;'>" +
            "<img src='./assets/QR_Nikah.png' class='qr-img'>" +
            "<div style='margin-top:2px; font-size:18px; opacity:0.8;'>E-Mail senden (Bitte alle Dokumente beifÃ¼gen)</div>" +
          "</div>",
        arInfo: "Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù‚Ø¯ Ø§Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ ÙŠØ¬Ø¨ Ø¥Ø­Ø¶Ø§Ø±:<br>" +
          "1ï¸âƒ£ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ù…ÙˆØ³Ø¹Ø© <br><span style='font-size:20px; opacity:0.8;'>(Erweiterte Meldebescheinigung vom Rathaus)</span><br>" +
          "2ï¸âƒ£ Ù†Ø³Ø® Ù…Ù† Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù‡ÙˆÙŠØ© Ù„ÙƒÙ„Ø§ Ø§Ù„Ø²ÙˆØ¬ÙŠÙ† <br><br>" +
          "Ù„ØªØ±ØªÙŠØ¨ Ù…ÙˆØ¹Ø¯ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:<br>" +
          "<strong style='color: var(--primary);'>info@iz-stuttgart.de</strong><br>" +
          "<span style='font-size:20px; opacity:0.8;'>(Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø±ÙØ§Ù‚ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª)</span><br><br>" +
          "Ø£Ùˆ Ø§Ù…Ø³Ø­ Ø±Ù…Ø² Ø§Ù„Ù€ QR:<br>" +
          "<div style='display:flex; flex-direction:column; align-items:center;'>" +
            "<img src='./assets/QR_Nikah.png' class='qr-img'>" +
            "<div style='margin-top:2px; font-size:18px; opacity:0.8;'>Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ (Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø±ÙØ§Ù‚ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª)</div>" +
          "</div>"
      },
            { 
        id: 2, 
        icon: "ğŸ•Œ", 
        deTitle: "Gebetszeiten", 
        arTitle: "Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©", 
        deInfo: "Wie viele Moscheen in Deutschland nutzen wir die Mawaqit App.<br><br>App ganz einfach herunterladen:<br>" +
          "1ï¸âƒ£ App Ã¼ber QR-Code herunterladen<br>" +
          "2ï¸âƒ£ Moschee auswÃ¤hlen: <strong style='color: var(--primary);'>Omar Ibn Al-Khattab (IZS) â€“ Stuttgart</strong><br><br>" +
          "<div style='display:flex; justify-content:center; gap:32px; margin-top:8px;'>" +
            "<div style='display:flex; flex-direction:column; align-items:center;'>" +
              "<img src='./assets/QR_Apple.png' class='store-badge'>" +
              "<div style='margin-top:4px; font-size:16px; opacity:0.8;'>App Store</div>" +
            "</div>" +
            "<div style='display:flex; flex-direction:column; align-items:center;'>" +
              "<img src='./assets/QR_Android.png' class='store-badge'>" +
              "<div style='margin-top:4px; font-size:16px; opacity:0.8;'>Google Play</div>" +
            "</div>" +
          "</div>",
        arInfo: "Ù…Ø«Ù„ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø¬Ø¯ ÙÙŠ Ø£Ù„Ù…Ø§Ù†ÙŠØ§ØŒ Ù†Ø³ØªØ®Ø¯Ù… ØªØ·Ø¨ÙŠÙ‚ Mawaqit.<br><br>Ø­Ù…Ù‘Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¹Ù„Ù‰ Ù‡Ø§ØªÙÙƒ:<br>" +
          "1ï¸âƒ£ Ø­Ù…Ù‘Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† Ø®Ù„Ø§Ù„ Ø±Ù…Ø² Ø§Ù„Ù€ QR<br>" +
          "2ï¸âƒ£ Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³Ø¬Ø¯: <strong style='color: var(--primary);'>Omar Ibn Al-Khattab (IZS) Stuttgart</strong><br><br>" +
          "<div style='display:flex; justify-content:center; gap:32px; margin-top:8px;'>" +
            "<div style='display:flex; flex-direction:column; align-items:center;'>" +
              "<img src='./assets/QR_Apple.png' class='store-badge'>" +
              "<div style='margin-top:4px; font-size:16px; opacity:0.8;'>App Store</div>" +
            "</div>" +
            "<div style='display:flex; flex-direction:column; align-items:center;'>" +
              "<img src='./assets/QR_Android.png' class='store-badge'>" +
              "<div style='margin-top:4px; font-size:16px; opacity:0.8;'>Google Play</div>" +
            "</div>" +
          "</div>"
      },
      { 
        id: 3, 
        icon: "ğŸ”¤", 
        deTitle: "Arabisch lernen fÃ¼r Kinder", 
        arTitle: "ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù„Ù„Ø£Ø·ÙØ§Ù„", 
        deInfo: "Anmeldung erforderlich.<br><br>Sie erreichen uns unter:<br><strong style='font-size:32px; color: var(--primary);'>+49 176 84425320</strong><br><span style='opacity:0.8;'>(WhatsApp)</span>", 
        arInfo: "Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨.<br><br>Ù„Ù„ØªÙˆØ§ØµÙ„:<br><strong style='font-size:32px; color: var(--primary);' dir='ltr'>+49 176 84425320</strong><br><span style='opacity:0.8;'>(WhatsApp)</span>" 
      },
      { 
        id: 4, 
        icon: "ğŸ“–", 
        deTitle: "Quran lernen fÃ¼r<br>Kinder", 
        arTitle: "ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ù„Ù„Ø£Ø·ÙØ§Ù„", 
        deInfo: "Anmeldung erforderlich.<br><br>Sie erreichen uns unter:<br><strong style='font-size:32px; color: var(--primary);'>+49 171 6260309</strong><br><span style='opacity:0.8;'>(WhatsApp)</span>", 
        arInfo: "Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨.<br><br>Ù„Ù„ØªÙˆØ§ØµÙ„:<br><strong style='font-size:32px; color: var(--primary);' dir='ltr'>+49 171 6260309</strong><br><span style='opacity:0.8;'>(WhatsApp)</span>" 
      },
      { 
        id: 5, 
        icon: "ğŸ¤", 
        deTitle: "VortrÃ¤ge", 
        arTitle: "Ù…Ø­Ø§Ø¶Ø±Ø§Øª", 
        deInfo: "<strong style='color: var(--primary);'>ğŸ—£ï¸ Arabisch vom Imam:</strong><br>" +
          "1. Freitag nach dem Maghreb Gebet<br>" +
          "2. Samstag nach dem Maghreb Gebet<br>" +
          "3. Sonntag nach dem Asr Gebet<br><br>" +
          "<strong style='color: var(--primary);'>ğŸ—£ï¸ Deutsch IZS Connect Jugendgruppe:</strong><br>" +
          "â€¢ Sonntag um 13:00 Uhr<br><br>" +
          "<strong style='color: var(--primary);'>ğŸ“¢ WhatsApp Kanal beitreten:</strong><br>" +
          "<div style='display:flex; flex-direction:column; align-items:center;'>" +
            "<img src='./assets/QR_Whatsapp_Channel.png' class='qr-img'>" +
            "<div style='margin-top:2px; font-size:18px; opacity:0.8;'>IZS Aktuell</div>" +
          "</div>", 
        arInfo: "<strong style='color: var(--primary);'>ğŸ—£ï¸ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø§Ù„Ø¥Ù…Ø§Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©:</strong><br>" +
          "Ù¡. Ø§Ù„Ø¬Ù…Ø¹Ø© Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨<br>" +
          "Ù¢. Ø§Ù„Ø³Ø¨Øª Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨<br>" +
          "Ù£. Ø§Ù„Ø£Ø­Ø¯ Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ±<br><br>" +
          "<strong style='color: var(--primary);'>ğŸ—£ï¸ Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø¨Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ© Ù…Ø¬Ù…ÙˆØ¹Ø© Ø´Ø¨Ø§Ø¨ IZS Connect:</strong><br>" +
          "â€¢ ÙƒÙ„ ÙŠÙˆÙ… Ø£Ø­Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø© 13:00<br><br>" +
          "<strong style='color: var(--primary);'>ğŸ“¢ Ø§Ù†Ø¶Ù… Ù„Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨:</strong><br>" +
          "<div style='display:flex; flex-direction:column; align-items:center;'>" +
            "<img src='./assets/QR_Whatsapp_Channel.png' class='qr-img'>" +
            "<div style='margin-top:2px; font-size:18px; opacity:0.8;'>IZS Aktuell</div>" +
          "</div>" 
      },
      { 
        id: 6, 
        icon: "ğŸ’¬", 
        deTitle: "Kontakt zur Moschee /<br>Fragen an den Imam", 
        arTitle: "Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¬Ø¯ \\\ <br>Ø£Ø³Ø¦Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù…Ø§Ù…", 
        deInfo: "<div style='background: var(--primary-light); padding: 16px 20px; border-radius: 12px; margin-bottom: 20px;'>" +
          "<strong style='color: var(--primary); font-size: 22px;'>ğŸ“ Allgemeiner Kontakt</strong><br>" +
          "<div style='margin-top: 8px;'>info@iz-stuttgart.de<br>www.izstuttgart.de<br><strong>+49 711 5590219</strong></div>" +
          "</div>" +
          "<div style='background: #f0f0f0; padding: 16px 20px; border-radius: 12px; margin-bottom: 20px;'>" +
          "<strong style='color: var(--primary); font-size: 22px;'>ğŸ‘” Vorstandsvorsitzende</strong><br>" +
          "<div style='margin-top: 8px;'>A. Eldamaty<br><strong>+49 175 2989000</strong></div>" +
          "</div>" +
          "<div style='border-top: 2px solid #eee; padding-top: 20px;'>" +
          "<strong style='color: var(--primary); font-size: 22px;'>ğŸ•Œ Fragen an den Imam</strong><br>" +
          "<div style='display:flex; flex-direction:column; align-items:center;'>" +
            "<img src='./assets/QR_Telegram.png' class='qr-img' style='width: 180px;'>" +
            "<div style='margin-top:2px; font-size:18px; opacity:0.8;'>Telegram</div>" +
          "</div>" +
          "<div style='margin-top:12px; background: #fff3cd; padding: 10px 16px; border-radius: 8px; font-size:20px; text-align:center;'>âš ï¸ Nur Fragen auf <strong>Arabisch</strong> werden beantwortet</div>" +
          "</div>",
        arInfo: "<div style='background: var(--primary-light); padding: 16px 20px; border-radius: 12px; margin-bottom: 20px;'>" +
          "<strong style='color: var(--primary); font-size: 22px;'>ğŸ“ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¹Ø§Ù…</strong><br>" +
          "<div style='margin-top: 8px;'>info@iz-stuttgart.de<br>www.izstuttgart.de<br><strong dir='ltr'>+49 711 5590219</strong></div>" +
          "</div>" +
          "<div style='background: #f0f0f0; padding: 16px 20px; border-radius: 12px; margin-bottom: 20px;'>" +
          "<strong style='color: var(--primary); font-size: 22px;'>ğŸ‘” Ø±Ø¦ÙŠØ³ Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</strong><br>" +
          "<div style='margin-top: 8px;'>A. Eldamaty<br><strong dir='ltr'>+49 175 2989000</strong></div>" +
          "</div>" +
          "<div style='border-top: 2px solid #eee; padding-top: 20px;'>" +
          "<strong style='color: var(--primary); font-size: 22px;'>ğŸ•Œ Ø£Ø³Ø¦Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù…Ø§Ù…</strong><br>" +
          "<div style='display:flex; flex-direction:column; align-items:center;'>" +
            "<img src='./assets/QR_Telegram.png' class='qr-img' style='width: 180px;'>" +
            "<div style='margin-top:2px; font-size:18px; opacity:0.8;'>ØªÙ„ÙŠØºØ±Ø§Ù…</div>" +
          "</div>" +
          "<div style='margin-top:12px; background: #fff3cd; padding: 10px 16px; border-radius: 8px; font-size:20px; text-align:center;'>âš ï¸ Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„Ù„ØºØ© <strong>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</strong> ÙÙ‚Ø·</div>" +
          "</div>"
      }
    ];

    const params = new URLSearchParams(window.location.search);
    const lang = params.get('lang') || 'de';
    
    if(lang === 'ar') {
        document.getElementById('grid').classList.add('rtl');
    }

    const grid = document.getElementById('grid');
    topics.forEach(t => {
      const btn = document.createElement('div');
      btn.className = 'topic-card';
      btn.innerHTML = `<span class="icon">${t.icon}</span><span class="label">${lang === 'ar' ? t.arTitle : t.deTitle}</span>`;
      btn.onclick = () => {
        // Use innerHTML so any HTML (e.g. <br>) in the title is rendered
        document.getElementById('mTitle').innerHTML = lang === 'ar' ? t.arTitle : t.deTitle;
        document.getElementById('mBody').innerHTML = lang === 'ar' ? t.arInfo : t.deInfo;
        document.getElementById('mBody').className = lang === 'ar' ? 'rtl' : '';
        openModal();
      };
      grid.appendChild(btn);
    });

    const backButton = document.querySelector('.back-nav');
    const closeButton = document.querySelector('#modal button');

    if (lang === 'ar') {
      backButton.textContent = 'Ø§Ù„Ø¹ÙˆØ¯Ø© â†';
      closeButton.textContent = 'Ø¥ØºÙ„Ø§Ù‚';
      document.body.classList.add('rtl');
    } else {
      backButton.textContent = 'â† ZurÃ¼ck';
      closeButton.textContent = 'SchlieÃŸen';
      document.body.classList.remove('rtl');
    }

    // Fade to green for screensaver
    function fadeToGreen() {
      const overlay = document.getElementById('greenOverlay');
      const content = document.getElementById('content');
      // Mark that we're coming from timeout
      sessionStorage.setItem('fromTimeout', 'true');
      
      // Start content exit animation first
      content.classList.add('exiting');
      
      // Then fade in green overlay
      setTimeout(() => {
        overlay.classList.remove('entry', 'reveal');
        overlay.classList.add('active');
      }, 150);
      
      // Navigate when fully covered
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 600);
    }

    let idle;
    const resetTimer = () => { 
      clearTimeout(idle); 
      idle = setTimeout(() => {
        fadeToGreen();
      }, 60000); 
    };
    window.onclick = resetTimer;
    resetTimer();
  </script>
</body>
</html>